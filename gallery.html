<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VISUALS — Image Gallery</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Crimson+Pro:ital,wght@0,300;0,400;1,300&family=DM+Mono:wght@300;400&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #0a0a0a;
      --surface: #111111;
      --border: #222;
      --text: #f0ece4;
      --muted: #666;
      --accent: #e8d5a3;
      --accent2: #c8a96e;
      --red: #c0392b;
      --blue: #2980b9;
      --green: #27ae60;
      --purple: #8e44ad;
    }

    html { scroll-behavior: smooth; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Crimson Pro', serif;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* ── NOISE OVERLAY ── */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
      pointer-events: none;
      z-index: 1000;
      opacity: 0.4;
    }

    /* ── HEADER ── */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 2rem 4rem;
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      background: rgba(10,10,10,0.92);
      backdrop-filter: blur(16px);
      z-index: 100;
    }

    .logo {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 2.4rem;
      letter-spacing: 0.12em;
      color: var(--accent);
      line-height: 1;
    }

    .logo span {
      color: var(--muted);
      font-size: 0.7rem;
      font-family: 'DM Mono', monospace;
      font-weight: 300;
      display: block;
      letter-spacing: 0.25em;
      margin-top: 2px;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 2rem;
      font-family: 'DM Mono', monospace;
      font-size: 0.72rem;
      color: var(--muted);
      letter-spacing: 0.1em;
    }

    #count-display { color: var(--accent); }

    /* ── FILTER BAR ── */
    .filter-bar {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 1.5rem 4rem;
      border-bottom: 1px solid var(--border);
      overflow-x: auto;
      scrollbar-width: none;
      flex-wrap: wrap;
    }
    .filter-bar::-webkit-scrollbar { display: none; }

    .filter-label {
      font-family: 'DM Mono', monospace;
      font-size: 0.65rem;
      color: var(--muted);
      letter-spacing: 0.2em;
      text-transform: uppercase;
      margin-right: 0.5rem;
      white-space: nowrap;
    }

    .filter-btn {
      padding: 0.4rem 1.1rem;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--muted);
      font-family: 'DM Mono', monospace;
      font-size: 0.68rem;
      letter-spacing: 0.12em;
      cursor: pointer;
      transition: all 0.25s;
      white-space: nowrap;
      text-transform: uppercase;
      position: relative;
      overflow: hidden;
    }

    .filter-btn::before {
      content: '';
      position: absolute;
      inset: 0;
      background: var(--accent);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.25s ease;
      z-index: -1;
    }

    .filter-btn:hover::before, .filter-btn.active::before { transform: scaleX(1); }
    .filter-btn:hover, .filter-btn.active {
      color: var(--bg);
      border-color: var(--accent);
    }

    /* ── VIEW TOGGLES ── */
    .view-toggles {
      display: flex;
      gap: 0.5rem;
      margin-left: auto;
    }

    .view-btn {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--muted);
      padding: 0.4rem 0.7rem;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.8rem;
    }
    .view-btn.active, .view-btn:hover { border-color: var(--accent); color: var(--accent); }

    /* ── GALLERY ── */
    .gallery-wrap {
      padding: 3rem 4rem;
      min-height: 60vh;
    }

    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      transition: all 0.4s ease;
    }

    .gallery.masonry {
      columns: 3;
      column-gap: 1.5rem;
      display: block;
    }

    .gallery.list {
      grid-template-columns: 1fr;
      gap: 0.5rem;
    }

    /* ── GALLERY ITEM ── */
    .gallery-item {
      position: relative;
      overflow: hidden;
      cursor: pointer;
      background: var(--surface);
      border: 1px solid var(--border);
      transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1),
                  box-shadow 0.35s ease,
                  opacity 0.4s ease;
      animation: fadeIn 0.5s ease both;
    }

    .gallery.masonry .gallery-item {
      break-inside: avoid;
      margin-bottom: 1.5rem;
      display: block;
    }

    .gallery.list .gallery-item {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      padding: 0.5rem;
    }

    .gallery.list .gallery-item .img-wrap {
      width: 120px;
      height: 80px;
      flex-shrink: 0;
    }

    .gallery-item:hover {
      transform: translateY(-6px);
      box-shadow: 0 20px 60px rgba(0,0,0,0.6), 0 0 0 1px var(--accent2);
      z-index: 2;
    }

    .gallery.list .gallery-item:hover {
      transform: translateX(8px);
      box-shadow: -4px 0 0 var(--accent);
    }

    .gallery-item.hidden {
      opacity: 0;
      transform: scale(0.92);
      pointer-events: none;
      position: absolute;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px) scale(0.97); }
      to   { opacity: 1; transform: translateY(0) scale(1); }
    }

    .img-wrap {
      width: 100%;
      aspect-ratio: 4/3;
      overflow: hidden;
      position: relative;
    }

    .gallery.masonry .img-wrap { aspect-ratio: unset; }

    .gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                  filter 0.4s ease;
      filter: brightness(0.88) saturate(0.9);
    }

    .gallery-item:hover img {
      transform: scale(1.07);
      filter: brightness(1) saturate(1.1);
    }

    /* ── OVERLAY ── */
    .item-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.85) 0%, transparent 50%);
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 1.2rem;
      opacity: 0;
      transition: opacity 0.35s ease;
    }

    .gallery-item:hover .item-overlay { opacity: 1; }

    .gallery.list .item-overlay { display: none; }

    .item-title {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 1.1rem;
      letter-spacing: 0.08em;
      color: #fff;
      line-height: 1.1;
    }

    .item-meta {
      font-family: 'DM Mono', monospace;
      font-size: 0.62rem;
      color: var(--accent);
      letter-spacing: 0.15em;
      margin-top: 0.3rem;
      text-transform: uppercase;
    }

    .item-tag {
      position: absolute;
      top: 0.8rem;
      right: 0.8rem;
      padding: 0.2rem 0.6rem;
      font-family: 'DM Mono', monospace;
      font-size: 0.58rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      border: 1px solid currentColor;
      backdrop-filter: blur(8px);
      background: rgba(0,0,0,0.4);
    }

    /* ── LIST VIEW INFO ── */
    .list-info {
      display: none;
    }
    .gallery.list .list-info {
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
      flex: 1;
    }
    .list-info .item-title { font-size: 1rem; color: var(--text); }
    .list-info .item-meta { color: var(--muted); }

    /* ── LIGHTBOX ── */
    #lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.96);
      z-index: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.35s ease;
    }

    #lightbox.open {
      opacity: 1;
      pointer-events: all;
    }

    .lb-inner {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      max-width: 90vw;
      max-height: 90vh;
      animation: lbIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) both;
    }

    @keyframes lbIn {
      from { transform: scale(0.85); opacity: 0; }
      to   { transform: scale(1); opacity: 1; }
    }

    #lb-img {
      max-width: 88vw;
      max-height: 72vh;
      object-fit: contain;
      display: block;
      box-shadow: 0 40px 120px rgba(0,0,0,0.8);
      transition: filter 0.3s ease;
    }

    .lb-info {
      margin-top: 1.5rem;
      text-align: center;
    }

    .lb-title {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 1.8rem;
      letter-spacing: 0.1em;
      color: var(--accent);
    }

    .lb-desc {
      font-style: italic;
      color: var(--muted);
      font-size: 0.95rem;
      margin-top: 0.4rem;
    }

    .lb-counter {
      font-family: 'DM Mono', monospace;
      font-size: 0.65rem;
      color: var(--muted);
      letter-spacing: 0.2em;
      margin-top: 0.6rem;
    }

    /* ── LB CONTROLS ── */
    .lb-btn {
      position: fixed;
      top: 50%;
      transform: translateY(-50%);
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text);
      font-size: 1.4rem;
      padding: 1rem 1.2rem;
      cursor: pointer;
      transition: all 0.25s;
      font-family: 'DM Mono', monospace;
      z-index: 10;
      line-height: 1;
    }

    .lb-btn:hover { border-color: var(--accent); color: var(--accent); background: rgba(232,213,163,0.08); }

    #lb-prev { left: 1.5rem; }
    #lb-next { right: 1.5rem; }

    #lb-close {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      background: transparent;
      border: 1px solid var(--border);
      color: var(--muted);
      font-size: 1rem;
      padding: 0.5rem 0.8rem;
      cursor: pointer;
      font-family: 'DM Mono', monospace;
      transition: all 0.2s;
      z-index: 10;
    }
    #lb-close:hover { border-color: var(--red); color: var(--red); }

    /* ── FILTER CONTROLS IN LIGHTBOX ── */
    .lb-filters {
      display: flex;
      gap: 0.6rem;
      margin-top: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .lb-filter-btn {
      padding: 0.3rem 0.8rem;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--muted);
      font-family: 'DM Mono', monospace;
      font-size: 0.6rem;
      letter-spacing: 0.1em;
      cursor: pointer;
      transition: all 0.2s;
      text-transform: uppercase;
    }

    .lb-filter-btn:hover, .lb-filter-btn.active {
      border-color: var(--accent2);
      color: var(--accent2);
    }

    /* ── NO RESULTS ── */
    .no-results {
      display: none;
      text-align: center;
      padding: 6rem 2rem;
      color: var(--muted);
    }
    .no-results.show { display: block; }
    .no-results h2 { font-family: 'Bebas Neue', sans-serif; font-size: 3rem; color: var(--border); letter-spacing: 0.1em; }
    .no-results p { font-style: italic; margin-top: 0.5rem; }

    /* ── RESPONSIVE ── */
    @media (max-width: 900px) {
      header { padding: 1.2rem 1.5rem; }
      .header-right { gap: 1rem; }
      .filter-bar { padding: 1rem 1.5rem; }
      .gallery-wrap { padding: 1.5rem; }
      .gallery.masonry { columns: 2; }
      .lb-btn { display: none; }
    }

    @media (max-width: 600px) {
      .logo { font-size: 1.7rem; }
      .header-right { font-size: 0.6rem; gap: 0.7rem; }
      .gallery { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 0.8rem; }
      .gallery.masonry { columns: 2; }
      .gallery.list { gap: 0.4rem; }
      .gallery.list .gallery-item .img-wrap { width: 80px; height: 55px; }
      #lb-img { max-width: 95vw; max-height: 60vh; }
    }

    /* ── SCROLLBAR ── */
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-track { background: var(--bg); }
    ::-webkit-scrollbar-thumb { background: var(--border); }

    /* ── TAG COLORS ── */
    [data-tag="nature"]     { color: #5daa7e; }
    [data-tag="urban"]      { color: #7bb3d8; }
    [data-tag="portrait"]   { color: #d8a07b; }
    [data-tag="abstract"]   { color: #a07bd8; }
    [data-tag="architecture"] { color: #d8cb7b; }
  </style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="logo">
    Visuals
    <span>Image Gallery v2.0</span>
  </div>
  <div class="header-right">
    <span>Showing <span id="count-display">0</span> images</span>
    <span id="current-filter-display">ALL</span>
  </div>
</header>

<!-- FILTER BAR -->
<div class="filter-bar">
  <span class="filter-label">Category —</span>
  <button class="filter-btn active" data-filter="all">All</button>
  <button class="filter-btn" data-filter="nature">Nature</button>
  <button class="filter-btn" data-filter="urban">Urban</button>
  <button class="filter-btn" data-filter="portrait">Portrait</button>
  <button class="filter-btn" data-filter="abstract">Abstract</button>
  <button class="filter-btn" data-filter="architecture">Architecture</button>
  <div class="view-toggles" style="margin-left:auto;">
    <button class="view-btn active" data-view="grid" title="Grid">⊞</button>
    <button class="view-btn" data-view="masonry" title="Masonry">⫿</button>
    <button class="view-btn" data-view="list" title="List">☰</button>
  </div>
</div>

<!-- GALLERY -->
<div class="gallery-wrap">
  <div class="gallery" id="gallery"></div>
  <div class="no-results" id="no-results">
    <h2>No Images</h2>
    <p>No images found in this category.</p>
  </div>
</div>

<!-- LIGHTBOX -->
<div id="lightbox">
  <button id="lb-close">✕ ESC</button>
  <button class="lb-btn" id="lb-prev">←</button>
  <button class="lb-btn" id="lb-next">→</button>
  <div class="lb-inner">
    <img id="lb-img" src="" alt="" />
    <div class="lb-info">
      <div class="lb-title" id="lb-title"></div>
      <div class="lb-desc" id="lb-desc"></div>
      <div class="lb-counter" id="lb-counter"></div>
    </div>
    <div class="lb-filters">
      <span style="font-family:'DM Mono',monospace;font-size:0.6rem;color:var(--muted);letter-spacing:0.2em;align-self:center;">FILTER —</span>
      <button class="lb-filter-btn active" data-lbfilter="none">None</button>
      <button class="lb-filter-btn" data-lbfilter="grayscale(100%)">B&W</button>
      <button class="lb-filter-btn" data-lbfilter="sepia(80%)">Sepia</button>
      <button class="lb-filter-btn" data-lbfilter="contrast(140%) saturate(150%)">Vivid</button>
      <button class="lb-filter-btn" data-lbfilter="invert(100%)">Invert</button>
      <button class="lb-filter-btn" data-lbfilter="hue-rotate(90deg)">Hue+90</button>
      <button class="lb-filter-btn" data-lbfilter="brightness(1.3) contrast(90%)">Bright</button>
    </div>
  </div>
</div>

<script>
const images = [
  { id:1,  title:"Alpine Solitude",    desc:"Misty peaks at first light",      category:"nature",       color:"#2d5a3d", img:"https://picsum.photos/seed/alpine1/800/600" },
  { id:2,  title:"Steel & Glass",      desc:"Downtown financial district",     category:"urban",        color:"#1a3a5c", img:"https://picsum.photos/seed/urban2/800/600" },
  { id:3,  title:"Golden Hour",        desc:"Portrait at dusk",                category:"portrait",     color:"#5c3a1a", img:"https://picsum.photos/seed/portrait3/600/800" },
  { id:4,  title:"Fluid Geometry",     desc:"Motion blur experiments",         category:"abstract",     color:"#3a1a5c", img:"https://picsum.photos/seed/abstract4/800/600" },
  { id:5,  title:"The Vault",          desc:"Roman arches in morning light",   category:"architecture", color:"#5c4a1a", img:"https://picsum.photos/seed/arch5/800/600" },
  { id:6,  title:"Ocean Drift",        desc:"Long exposure seascape",          category:"nature",       color:"#1a4a5c", img:"https://picsum.photos/seed/ocean6/800/900" },
  { id:7,  title:"Neon Veins",         desc:"Tokyo at midnight",               category:"urban",        color:"#1a1a4a", img:"https://picsum.photos/seed/neon7/800/600" },
  { id:8,  title:"Chroma Study",       desc:"Color theory composition",        category:"abstract",     color:"#4a1a3a", img:"https://picsum.photos/seed/chroma8/800/600" },
  { id:9,  title:"The Elder",          desc:"Weathered portrait series",       category:"portrait",     color:"#4a3a1a", img:"https://picsum.photos/seed/elder9/600/800" },
  { id:10, title:"Cathedral Bones",    desc:"Gothic ribbed vault, France",     category:"architecture", color:"#3a3a1a", img:"https://picsum.photos/seed/gothic10/800/600" },
  { id:11, title:"Autumn Corridor",    desc:"Forest path in October",          category:"nature",       color:"#5c3a1a", img:"https://picsum.photos/seed/autumn11/800/600" },
  { id:12, title:"Market Hours",       desc:"Istanbul spice bazaar",           category:"urban",        color:"#5c4a1a", img:"https://picsum.photos/seed/market12/800/600" },
  { id:13, title:"Liquid Light",       desc:"Refraction and reflection",       category:"abstract",     color:"#1a4a5c", img:"https://picsum.photos/seed/liquid13/800/700" },
  { id:14, title:"Brutalism",          desc:"Soviet-era civic center",         category:"architecture", color:"#2a2a2a", img:"https://picsum.photos/seed/brute14/800/600" },
  { id:15, title:"Dawn Catch",         desc:"Fishermen on the Mekong",         category:"nature",       color:"#2a4a3a", img:"https://picsum.photos/seed/dawn15/900/600" },
  { id:16, title:"Warehouse District", desc:"Industrial loft conversions",     category:"urban",        color:"#3a2a1a", img:"https://picsum.photos/seed/warehouse16/800/600" },
  { id:17, title:"Inner Light",        desc:"Studio portraiture",              category:"portrait",     color:"#3a2a1a", img:"https://picsum.photos/seed/inner17/600/800" },
  { id:18, title:"Noise Field",        desc:"Generative pattern study",        category:"abstract",     color:"#1a1a3a", img:"https://picsum.photos/seed/noise18/800/800" },
];

let currentFilter = 'all';
let currentView = 'grid';
let filteredImages = [...images];
let lightboxIndex = 0;
let currentLbCSSFilter = 'none';

const gallery = document.getElementById('gallery');
const lightbox = document.getElementById('lightbox');
const lbImg = document.getElementById('lb-img');
const lbTitle = document.getElementById('lb-title');
const lbDesc = document.getElementById('lb-desc');
const lbCounter = document.getElementById('lb-counter');
const countDisplay = document.getElementById('count-display');
const currentFilterDisplay = document.getElementById('current-filter-display');
const noResults = document.getElementById('no-results');

function tagColor(cat) {
  const map = { nature:'#5daa7e', urban:'#7bb3d8', portrait:'#d8a07b', abstract:'#a07bd8', architecture:'#d8cb7b' };
  return map[cat] || '#888';
}

function renderGallery() {
  gallery.innerHTML = '';
  filteredImages = currentFilter === 'all' ? [...images] : images.filter(i => i.category === currentFilter);
  
  countDisplay.textContent = filteredImages.length;
  currentFilterDisplay.textContent = currentFilter.toUpperCase();
  
  if (filteredImages.length === 0) {
    noResults.classList.add('show');
    return;
  }
  noResults.classList.remove('show');

  filteredImages.forEach((img, idx) => {
    const item = document.createElement('div');
    item.className = 'gallery-item';
    item.style.animationDelay = `${idx * 0.05}s`;
    item.innerHTML = `
      <div class="img-wrap">
        <img src="${img.img}" alt="${img.title}" loading="lazy" />
        <div class="item-overlay">
          <div class="item-title">${img.title}</div>
          <div class="item-meta">${img.desc}</div>
        </div>
        <div class="item-tag" style="color:${tagColor(img.category)}">${img.category}</div>
      </div>
      <div class="list-info">
        <div class="item-title">${img.title}</div>
        <div class="item-meta">${img.category} — ${img.desc}</div>
      </div>
    `;
    item.addEventListener('click', () => openLightbox(idx));
    gallery.appendChild(item);
  });
}

function openLightbox(idx) {
  lightboxIndex = idx;
  updateLightbox();
  lightbox.classList.add('open');
  document.body.style.overflow = 'hidden';
  // Reset filter
  setLbFilter('none');
  document.querySelectorAll('.lb-filter-btn').forEach(b => b.classList.toggle('active', b.dataset.lbfilter === 'none'));
}

function closeLightbox() {
  lightbox.classList.remove('open');
  document.body.style.overflow = '';
}

function updateLightbox() {
  const img = filteredImages[lightboxIndex];
  lbImg.src = img.img;
  lbImg.alt = img.title;
  lbTitle.textContent = img.title;
  lbDesc.textContent = img.desc;
  lbCounter.textContent = `${lightboxIndex + 1} / ${filteredImages.length} — ${img.category.toUpperCase()}`;
}

function setLbFilter(f) {
  currentLbCSSFilter = f;
  lbImg.style.filter = f === 'none' ? '' : f;
}

document.getElementById('lb-close').addEventListener('click', closeLightbox);

document.getElementById('lb-prev').addEventListener('click', () => {
  lightboxIndex = (lightboxIndex - 1 + filteredImages.length) % filteredImages.length;
  updateLightbox();
});

document.getElementById('lb-next').addEventListener('click', () => {
  lightboxIndex = (lightboxIndex + 1) % filteredImages.length;
  updateLightbox();
});

document.querySelectorAll('.lb-filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.lb-filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    setLbFilter(btn.dataset.lbfilter);
  });
});

lightbox.addEventListener('click', e => { if (e.target === lightbox) closeLightbox(); });

document.addEventListener('keydown', e => {
  if (!lightbox.classList.contains('open')) return;
  if (e.key === 'Escape') closeLightbox();
  if (e.key === 'ArrowLeft') { lightboxIndex = (lightboxIndex - 1 + filteredImages.length) % filteredImages.length; updateLightbox(); }
  if (e.key === 'ArrowRight') { lightboxIndex = (lightboxIndex + 1) % filteredImages.length; updateLightbox(); }
});

// Touch swipe
let touchStartX = 0;
lightbox.addEventListener('touchstart', e => { touchStartX = e.changedTouches[0].clientX; }, { passive: true });
lightbox.addEventListener('touchend', e => {
  const dx = e.changedTouches[0].clientX - touchStartX;
  if (Math.abs(dx) > 50) {
    if (dx < 0) { lightboxIndex = (lightboxIndex + 1) % filteredImages.length; }
    else { lightboxIndex = (lightboxIndex - 1 + filteredImages.length) % filteredImages.length; }
    updateLightbox();
  }
});

document.querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentFilter = btn.dataset.filter;
    renderGallery();
  });
});

document.querySelectorAll('.view-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentView = btn.dataset.view;
    gallery.className = 'gallery';
    if (currentView !== 'grid') gallery.classList.add(currentView);
  });
});

renderGallery();
</script>
</body>
</html>
